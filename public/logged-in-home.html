<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Mark-It</title>
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/side-bar.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
    <div id="wrapper" class="">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                        <h2>Mark It</h2>
                    </a>
                </li>
                <li class="default-line-height white-font profile-background">
                    <div class="container nopadding">
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="row">
                                    <div class="col-lg-3">
                                        <img id="profile-pic" src="" alt="profile-pic">
                                    </div>
                                    <div class="col-lg-9 nopadding">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <span id="user-name" class="header-span"></span>
                                            </div>
                                        </div>
                                        <div class="row mts">
                                            <div class="col-lg-12">
                                                <span id="user-email"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="mtm">
                    <a href="#attendance">Attendance</a>
                </li>
                <li>
                    <a href="#results">Results</a>
                </li>
                <li>
                    <a href="#activities">Activities</a>
                </li>
                <li>
                    <a href="#events">Events</a>
                </li>
                <li>
                    <a href="#admissions">Admissions</a>
                </li>
                <li>
                    <a href="#about-us">About Us</a>
                </li>
                <li>
                    <a href="#contact">Contact</a>
                </li>
                <li>
                    <a href="/logout">Logout</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row mtxl">
                    <div class="col-lg-12">
                        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle Menu</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
</body>
<script src="/javascripts/jquery.min.js"></script>
<script>
(function($, window, undefined) {
    $('#profile').addClass('hidden');
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    $.get(
        '/get-logged-in-user',
        function(data) {
            console.log(data);
            appendUserDetails(data);
        });

    function appendUserDetails(data) {
        $('#profile-pic').attr({
            src: data.profilePicUrl
        });
        $('#user-name').text(capitalizInitialLetter(data.displayName));
        $('#user-email').text(data.email);
        $('#profile').removeClass('hidden');
    }

    function capitalizInitialLetter(string) {
        if (!string)
            return string;

        var stringWords = string.trim().split(' ');

        if (!stringWords)
            return;

        var capitalizedInitialLetter = '';
        for (var i = 0; i < stringWords.length; i++) {
            if (!stringWords[i].length)
                continue;
            stringWords[i] = stringWords[i].charAt(0).toUpperCase() + stringWords[i].slice(1).toLowerCase();
        };
        return stringWords.join(' ');
    }
})(jQuery, window);
</script>

</html>
